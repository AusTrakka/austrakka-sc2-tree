

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="">
    
    
      
        <title>Lineage - Austrakka Covid Tree 0.13.2 documentation</title>
      
    
    
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/sphinx_immaterial_theme.f3acc93d38188d70c.min.css" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rules" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Austrakka Covid Tree 0.13.2 documentation" class="md-header__button md-logo" aria-label="Austrakka Covid Tree 0.13.2 documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Austrakka Covid Tree 0.13.2 documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lineage
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/AusTrakka/austrakka-sc2-tree" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    austrakka-sc2-tree
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Austrakka Covid Tree 0.13.2 documentation" class="md-nav__button md-logo" aria-label="Austrakka Covid Tree 0.13.2 documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    Austrakka Covid Tree 0.13.2 documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/AusTrakka/austrakka-sc2-tree" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    austrakka-sc2-tree
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../usage.html" class="md-nav__link">
        <span class="md-ellipsis">Usage</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../workflow.html"><span class="md-ellipsis">Workflow</span></a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Workflow" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Workflow</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../workflow.html#modules-rules"><span class="md-ellipsis">Modules &amp; Rules</span></a>
          
            <label for="__nav_2_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Modules &amp; Rules" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Modules &amp; Rules</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">Lineage</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">Lineage</span>
      </a>
      
        

  

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span class="md-ellipsis">Lineage</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rules" class="md-nav__link">
    <span class="md-ellipsis">Rules</span>
  </a>
  
    <nav class="md-nav" aria-label="Rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rule-download_nextclade_db" class="md-nav__link">
    <span title="rule.download_nextclade_db (Snakemake rule)" class="md-ellipsis">download_<wbr>nextclade_<wbr>db</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rule-nextclade" class="md-nav__link">
    <span title="rule.nextclade (Snakemake rule)" class="md-ellipsis">nextclade</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rule-mask_lineages" class="md-nav__link">
    <span title="rule.mask_lineages (Snakemake rule)" class="md-ellipsis">mask_<wbr>lineages</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rule-collapse_lineages" class="md-nav__link">
    <span title="rule.collapse_lineages (Snakemake rule)" class="md-ellipsis">collapse_<wbr>lineages</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rule-extract_upload_metadata" class="md-nav__link">
    <span title="rule.extract_upload_metadata (Snakemake rule)" class="md-ellipsis">extract_<wbr>upload_<wbr>metadata</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="filter.html" class="md-nav__link">
        <span class="md-ellipsis">Filter</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tree.html" class="md-nav__link">
        <span class="md-ellipsis">Tree</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="phytest.html" class="md-nav__link">
        <span class="md-ellipsis">Testing</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../installation.html" class="md-nav__link">
        <span class="md-ellipsis">Installation</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span class="md-ellipsis">Lineage</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rules" class="md-nav__link">
    <span class="md-ellipsis">Rules</span>
  </a>
  
    <nav class="md-nav" aria-label="Rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rule-download_nextclade_db" class="md-nav__link">
    <span title="rule.download_nextclade_db (Snakemake rule)" class="md-ellipsis">download_<wbr>nextclade_<wbr>db</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rule-nextclade" class="md-nav__link">
    <span title="rule.nextclade (Snakemake rule)" class="md-ellipsis">nextclade</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rule-mask_lineages" class="md-nav__link">
    <span title="rule.mask_lineages (Snakemake rule)" class="md-ellipsis">mask_<wbr>lineages</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rule-collapse_lineages" class="md-nav__link">
    <span title="rule.collapse_lineages (Snakemake rule)" class="md-ellipsis">collapse_<wbr>lineages</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rule-extract_upload_metadata" class="md-nav__link">
    <span title="rule.extract_upload_metadata (Snakemake rule)" class="md-ellipsis">extract_<wbr>upload_<wbr>metadata</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


<h1 id="lineage"><span id="id1"></span>Lineage<a class="headerlink" href="#lineage" title="Permalink to this heading">¶</a></h1>
<p>This module contains the rules to assign covid lineages.</p>
<h2 id="rules">Rules<a class="headerlink" href="#rules" title="Permalink to this heading">¶</a></h2>
<dl class="smk rule objdesc">
<dt class="sig sig-object highlight smk" id="rule-download_nextclade_db">
<span class="desctype"><span class="pre">Rule</span></span><span class="w"> </span><span class="sig-name descname"><span class="pre">download_nextclade_db</span></span><a class="reference external" href="https://github.com/AusTrakka/austrakka-sc2-tree/blob/main/src/austrakka_sc2_tree/workflow/rules/lineage.smk#L1"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rule-download_nextclade_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads the latest Nextclade database for SARS-CoV-2.</p>
<dl class="field-list simple">
<dt class="field-odd" id="rule-download_nextclade_db-output">Output<span class="colon">:</span><a class="headerlink" href="#rule-download_nextclade_db-output" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><p>Temporary directory to store the downloaded Nextclade database.</p>
</dd>
<dt class="field-even" id="rule-download_nextclade_db-conda">Conda<span class="colon">:</span><a class="headerlink" href="#rule-download_nextclade_db-conda" title="Permalink to this headline">¶</a></dt>
<dd class="field-even"><p>Path to the Conda environment file (nextclade.yaml) in the ENVS directory.</p>
</dd>
<dt class="field-odd" id="rule-download_nextclade_db-params">Params<span class="colon">:</span><a class="headerlink" href="#rule-download_nextclade_db-params" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><p><strong>download_unreleased_tree</strong> – Flag to determine whether to download the unreleased Nextclade tree. Set to 1 if
‘use_unreleased_nextclade’ is set to True in the configuration, otherwise 0.</p>
</dd>
</dl>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>This rule uses the ‘nextclade dataset get’ command to download the latest Nextclade database for SARS-CoV-2.
If ‘use_unreleased_nextclade’ is set to True in the configuration, it also downloads the unreleased Nextclade
tree from the Nextstrain staging area.</p>
</div>
<dl class="field-list">
<dt class="field-odd" id="rule-download_nextclade_db-conda">Conda<span class="colon">:</span><a class="headerlink" href="#rule-download_nextclade_db-conda" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><code><span class="nt">channels</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bioconda</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nextclade=3.3.1</span>
</code></pre></div>
</div>
</dd>
</dl>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="smk rule objdesc">
<dt class="sig sig-object highlight smk" id="rule-nextclade">
<span class="desctype"><span class="pre">Rule</span></span><span class="w"> </span><span class="sig-name descname"><span class="pre">nextclade</span></span><a class="reference external" href="https://github.com/AusTrakka/austrakka-sc2-tree/blob/main/src/austrakka_sc2_tree/workflow/rules/lineage.smk#L36"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rule-nextclade" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs Nextclade to get the lineage calls for the input genome sequences.</p>
<dl class="field-list simple">
<dt class="field-odd" id="rule-nextclade-input">Input<span class="colon">:</span><a class="headerlink" href="#rule-nextclade-input" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fasta</strong> – Path to the input FASTA file containing genome sequences.</p></li>
<li><p><strong>nextclade_data_dir</strong> – Directory containing the downloaded Nextclade database.</p></li>
</ul>
</dd>
<dt class="field-even" id="rule-nextclade-output">Output<span class="colon">:</span><a class="headerlink" href="#rule-nextclade-output" title="Permalink to this headline">¶</a></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>nextclade_tsv</strong> – Temporary TSV file to store the lineage call results from Nextclade.</p></li>
<li><p><strong>alignment</strong> – Temporary FASTA file to store the aligned sequences generated by Nextclade.</p></li>
</ul>
</dd>
<dt class="field-odd" id="rule-nextclade-threads">Threads<span class="colon">:</span><a class="headerlink" href="#rule-nextclade-threads" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><p>Number of threads to use for this rule, which is fetched from the “lineage” section of the
configuration. If not specified, the total number of available cores in the workflow
is used.</p>
</dd>
<dt class="field-even" id="rule-nextclade-conda">Conda<span class="colon">:</span><a class="headerlink" href="#rule-nextclade-conda" title="Permalink to this headline">¶</a></dt>
<dd class="field-even"><p>Path to the Conda environment file (nextclade.yaml) in the ENVS directory.</p>
</dd>
</dl>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>This rule uses the ‘nextclade run’ command to call lineages for the input genome sequences. It uses the downloaded
Nextclade database for this purpose. The lineage calls are stored in a TSV file, and the aligned sequences are
stored in a FASTA file. The standard error and output from the command are logged in the specified log file.</p>
</div>
<dl class="field-list">
<dt class="field-odd" id="rule-nextclade-conda">Conda<span class="colon">:</span><a class="headerlink" href="#rule-nextclade-conda" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><code><span class="nt">channels</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bioconda</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nextclade=3.3.1</span>
</code></pre></div>
</div>
</dd>
</dl>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="smk rule objdesc">
<dt class="sig sig-object highlight smk" id="rule-mask_lineages">
<span class="desctype"><span class="pre">Rule</span></span><span class="w"> </span><span class="sig-name descname"><span class="pre">mask_lineages</span></span><a class="reference external" href="https://github.com/AusTrakka/austrakka-sc2-tree/blob/main/src/austrakka_sc2_tree/workflow/rules/lineage.smk#L88"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rule-mask_lineages" title="Permalink to this definition">¶</a></dt>
<dd><p>Masks ‘Unassigned’ and ‘LowCoverage’ lineage calls in the input lineage call results.</p>
<dl class="field-list simple">
<dt class="field-odd" id="rule-mask_lineages-input">Input<span class="colon">:</span><a class="headerlink" href="#rule-mask_lineages-input" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><p><strong>nextclade_tsv</strong> – The TSV file produced by the <a class="reference internal" href="#rule-collapse_lineages" title="rule-collapse_lineages"><code class="xref smk smk-ref docutils literal notranslate"><span class="pre">collapse_lineages</span></code></a> rule, containing collapsed lineage call results.</p>
</dd>
<dt class="field-even" id="rule-mask_lineages-output">Output<span class="colon">:</span><a class="headerlink" href="#rule-mask_lineages-output" title="Permalink to this headline">¶</a></dt>
<dd class="field-even"><p><strong>masked_nextclade_tsv</strong> – Temporary TSV file to store the masked lineage call results.</p>
</dd>
<dt class="field-odd" id="rule-mask_lineages-conda">Conda<span class="colon">:</span><a class="headerlink" href="#rule-mask_lineages-conda" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><p>Path to the Conda environment file (python.yaml) in the ENVS directory.</p>
</dd>
<dt class="field-even" id="rule-mask_lineages-script">Script<span class="colon">:</span><a class="headerlink" href="#rule-mask_lineages-script" title="Permalink to this headline">¶</a></dt>
<dd class="field-even"><p>Python script (mask_lineages.py) in the SCRIPTS directory that is run to mask ‘Unassigned’
and ‘LowCoverage’ lineage calls.</p>
</dd>
</dl>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>This rule runs a Python script to mask ‘Unassigned’ and ‘LowCoverage’ lineage calls in the input lineage call results.
The masked lineage calls are stored in a TSV file. The standard error and output from the command are logged in the
specified log file.</p>
</div>
<dl class="field-list">
<dt class="field-odd" id="rule-mask_lineages-conda">Conda<span class="colon">:</span><a class="headerlink" href="#rule-mask_lineages-conda" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><code><span class="nt">channels</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bioconda</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">defaults</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pip</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pandas</span>
</code></pre></div>
</div>
</dd>
</dl>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="smk rule objdesc">
<dt class="sig sig-object highlight smk" id="rule-collapse_lineages">
<span class="desctype"><span class="pre">Rule</span></span><span class="w"> </span><span class="sig-name descname"><span class="pre">collapse_lineages</span></span><a class="reference external" href="https://github.com/AusTrakka/austrakka-sc2-tree/blob/main/src/austrakka_sc2_tree/workflow/rules/lineage.smk#L119"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rule-collapse_lineages" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs pango-collapse to collapse Nextclade lineages.</p>
<dl class="field-list">
<dt class="field-odd" id="rule-collapse_lineages-input">Input<span class="colon">:</span><a class="headerlink" href="#rule-collapse_lineages-input" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><p><strong>nextclade_tsv</strong> – The TSV file produced by the <a class="reference internal" href="#rule-nextclade" title="rule-nextclade"><code class="xref smk smk-ref docutils literal notranslate"><span class="pre">nextclade</span></code></a> rule, containing lineage call results.</p>
</dd>
<dt class="field-even" id="rule-collapse_lineages-output">Output<span class="colon">:</span><a class="headerlink" href="#rule-collapse_lineages-output" title="Permalink to this headline">¶</a></dt>
<dd class="field-even"><p><strong>nextclade_collapsed_tsv</strong> – Temporary TSV file to store the collapsed lineage results.</p>
</dd>
<dt class="field-odd" id="rule-collapse_lineages-params">Params<span class="colon">:</span><a class="headerlink" href="#rule-collapse_lineages-params" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><p><strong>url</strong> – The URL of the collapse.txt file used for lineage collapsing. This is fetched from the
“lineage” section of the configuration, with a default value pointing to the collapse.txt
file in the MDU-PHL/pango-collapse repository on GitHub.</p>
</dd>
<dt class="field-even" id="rule-collapse_lineages-conda">Conda<span class="colon">:</span><a class="headerlink" href="#rule-collapse_lineages-conda" title="Permalink to this headline">¶</a></dt>
<dd class="field-even"><p>Path to the Conda environment file (pango_collapse.yaml) in the ENVS directory.</p>
<p>structured as “collapse_lineages.{name}.log”.</p>
</dd>
</dl>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>This rule uses the ‘pango-collapse’ command to collapse lineages in the input lineage call results. The collapsed
lineage calls are stored in a TSV file. The standard error and output from the command are logged in the
specified log file.</p>
</div>
<dl class="field-list">
<dt class="field-odd" id="rule-collapse_lineages-conda">Conda<span class="colon">:</span><a class="headerlink" href="#rule-collapse_lineages-conda" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><code><span class="nt">channels</span><span class="p">:</span><span class="w">                                                                                                                                                                   </span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bioconda</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge</span>
<span class="nt">dependencies</span><span class="p">:</span><span class="w">                                                                                                                                                               </span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python=3.9</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pip</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pango-collapse==0.8.2</span>
</code></pre></div>
</div>
</dd>
</dl>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="smk rule objdesc">
<dt class="sig sig-object highlight smk" id="rule-extract_upload_metadata">
<span class="desctype"><span class="pre">Rule</span></span><span class="w"> </span><span class="sig-name descname"><span class="pre">extract_upload_metadata</span></span><a class="reference external" href="https://github.com/AusTrakka/austrakka-sc2-tree/blob/main/src/austrakka_sc2_tree/workflow/rules/lineage.smk#L154"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rule-extract_upload_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Nextclade output to AT upload format.</p>
<dl class="field-list simple">
<dt class="field-odd" id="rule-extract_upload_metadata-input">Input<span class="colon">:</span><a class="headerlink" href="#rule-extract_upload_metadata-input" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><p><strong>nextclade_tsv</strong> – The TSV file produced by the <a class="reference internal" href="#rule-mask_lineages" title="rule-mask_lineages"><code class="xref smk smk-ref docutils literal notranslate"><span class="pre">mask_lineages</span></code></a> rule, containing masked lineage call results.</p>
</dd>
<dt class="field-even" id="rule-extract_upload_metadata-output">Output<span class="colon">:</span><a class="headerlink" href="#rule-extract_upload_metadata-output" title="Permalink to this headline">¶</a></dt>
<dd class="field-even"><p><strong>at_matadata_tsv</strong> – The output TSV file with column names in AT format.</p>
</dd>
<dt class="field-odd" id="rule-extract_upload_metadata-conda">Conda<span class="colon">:</span><a class="headerlink" href="#rule-extract_upload_metadata-conda" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><p>Path to the Conda environment file (python.yaml) in the ENVS directory.</p>
</dd>
<dt class="field-even" id="rule-extract_upload_metadata-script">Script<span class="colon">:</span><a class="headerlink" href="#rule-extract_upload_metadata-script" title="Permalink to this headline">¶</a></dt>
<dd class="field-even"><p>Python script (rename_columns.py) in the SCRIPTS directory that is run to rename Nextclade
columns to AT format.</p>
</dd>
</dl>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>This rule runs a Python script to rename Nextclade columns to the AT format in the input lineage call results.
The renamed lineage calls are stored in a TSV file. The standard error and output from the command are logged in the
specified log file.</p>
</div>
<dl class="field-list">
<dt class="field-odd" id="rule-extract_upload_metadata-conda">Conda<span class="colon">:</span><a class="headerlink" href="#rule-extract_upload_metadata-conda" title="Permalink to this headline">¶</a></dt>
<dd class="field-odd"><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><code><span class="nt">channels</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bioconda</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">defaults</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pip</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pandas</span>
</code></pre></div>
</div>
</dd>
</dl>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>






                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../workflow.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Workflow" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Workflow
            </div>
          </div>
        </a>
      
      
        
        <a href="filter.html" class="md-footer__link md-footer__link--next" aria-label="Next: Filter" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Filter
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2023-present, Austrakka.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    6.2.1.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "navigation.instant", "toc.follow"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="../_static/sphinx_immaterial_theme.f9d9eeeb247ace16c.min.js"></script>
    
  </body>
</html>